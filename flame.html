<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/d3-flame-graph@4.0.6/dist/d3-flamegraph.css">
</head>
<body>
  <div id="chart-container">
    <div id="chart"></div>
  </div>
  <script type="text/javascript" src="https://d3js.org/d3.v4.min.js"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/d3-flame-graph@4.0.6/dist/d3-flamegraph.min.js"></script>
  <script type="text/javascript">
    const container = document.getElementById('chart-container');
    const chart = flamegraph();

    d3.json('data.json', (error, data) => {
      if (error) {
        return console.warn(error)
      }

      d3.select('#chart')
        .datum(data)
        .call(chart);
    });

    const resizeChart = () => {
      const width = container.clientWidth;
      const svg = container.getElementsByClassName('d3-flame-graph')
      if (svg.length > 0) {
          svg[0].setAttribute('width', width)
      }
      chart.width(width);
      chart.resetZoom();
    };

    window.addEventListener('resize', e => resizeChart());
    window.addEventListener('DOMContentLoaded', e => resizeChart());
  </script>
</body>
</html>